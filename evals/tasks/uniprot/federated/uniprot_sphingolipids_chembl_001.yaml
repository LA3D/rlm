# Eval Task: UniProt Federated - Human enzymes metabolizing sphingolipids with ChEMBL xrefs
# Source exemplar: ontology/uniprot/examples/UniProt/40_human_enzymes_that_metabolize_sphingolipids.ttl

task:
  id: "uniprot_sphingolipids_chembl_001"
  category: "uniprot/federated"
  difficulty: "hard"

  query: "Retrieve human enzymes that metabolize sphingolipids and are annotated in ChEMBL."

  context:
    ontologies:
      - name: uniprot_core
        source: ontology/uniprot/core.ttl
    sparql:
      endpoint: "https://sparql.uniprot.org/sparql/"
      prefixes: "ontology/uniprot/examples/prefixes.ttl"
      exemplar: "ontology/uniprot/examples/UniProt/40_human_enzymes_that_metabolize_sphingolipids.ttl"

  graders:
    - type: convergence
      max_iterations: 12
    - type: sparql_structural
      # Federation to Rhea is the learning objective
      requires_service: ["sparql.rhea-db.org"]
    - type: outcome_verification
      # Verify results contain human enzymes
      result_type: "present"
      min_results: 1
      required_fields: ["protein"]
    - type: tool_called
      required: ["sparql_query"]

  trials: 3

