# Eval Task: Reasoning Level L4 - Federation Planning
# Tests if agent can recognize when SERVICE federation is needed

task:
  id: "multi_endpoint_routing_001"
  category: "reasoning/federation_planning"
  difficulty: "hard"
  reasoning_level: "L4_federation"

  query: "Find proteins that participate in reactions with EC number 2.7.11.1 (protein kinase). This requires joining UniProt data with Rhea reaction database."

  context:
    ontologies:
      - name: uniprot_core
        source: ontology/uniprot/core.ttl
    sparql:
      endpoint: "https://sparql.uniprot.org/sparql/"
    hints: "Rhea reaction data is at https://sparql.rhea-db.org/sparql - use SERVICE clause"

  graders:
    - type: convergence
      max_iterations: 15
    - type: sparql_structural
      requires_service: ["sparql.rhea-db.org"]
      required_patterns: ["SERVICE", "up:catalyzedReaction"]
    - type: tool_called
      required: ["sparql_query"]

  trials: 3
