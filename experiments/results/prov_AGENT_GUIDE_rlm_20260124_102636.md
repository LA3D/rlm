# PROV Ontology Agent Guide

## Overview

The PROV (Provenance) Ontology is a W3C standard for representing and interchanging provenance information across different systems and domains. PROV enables the description of the entities, activities, and people involved in producing a piece of data or thing, which can be used to form assessments about its quality, reliability, or trustworthiness.

**Ontology Statistics:**
- Classes: 59
- Properties: 89
- Individuals: 1
- Total Triples: 1,664
- Namespace: `http://www.w3.org/ns/prov#`

## Core PROV Model

The PROV model is built around three fundamental concepts:

### 1. Core Classes

#### **Entity** (`prov:Entity`)
- **Definition**: A physical, digital, conceptual, or other kind of thing with some fixed aspects
- **Examples**: Documents, datasets, files, web pages, physical objects
- **Key Properties**: `prov:wasGeneratedBy`, `prov:wasAttributedTo`, `prov:wasDerivedFrom`

#### **Activity** (`prov:Activity`) 
- **Definition**: Something that occurs over a period of time and acts upon or with entities
- **Examples**: Data processing, file creation, scientific experiments, computations
- **Key Properties**: `prov:used`, `prov:wasAssociatedWith`, `prov:wasInformedBy`

#### **Agent** (`prov:Agent`)
- **Definition**: Something that bears some form of responsibility for an activity taking place
- **Subtypes**: `prov:Person`, `prov:Organization`, `prov:SoftwareAgent`
- **Key Properties**: `prov:actedOnBehalfOf`

### 2. Core Relationships

| Property | Domain | Range | Description |
|----------|--------|-------|-------------|
| `prov:used` | Activity | Entity | An activity used an entity |
| `prov:wasGeneratedBy` | Entity | Activity | An entity was generated by an activity |
| `prov:wasAssociatedWith` | Activity | Agent | An activity was associated with an agent |
| `prov:wasAttributedTo` | Entity | Agent | An entity was attributed to an agent |
| `prov:wasDerivedFrom` | Entity | Entity | An entity was derived from another entity |
| `prov:wasInformedBy` | Activity | Activity | An activity was informed by another activity |

## Complete Class Hierarchy

### Core Classes
- **Activity**: Activities that occur over time
- **Entity**: Things with fixed aspects
- **Agent**: Responsible parties

### Agent Specializations
- **Person**: Individual human agents
- **Organization**: Collective agents
- **SoftwareAgent**: Computational agents

### Influence Classes
- **Influence**: General influence relationship
- **ActivityInfluence**: Influence by activities
- **AgentInfluence**: Influence by agents  
- **EntityInfluence**: Influence by entities

### Specific Influence Types
- **Association**: Activity-agent relationships
- **Attribution**: Entity-agent relationships
- **Communication**: Activity-activity information flow
- **Delegation**: Agent-agent responsibility transfer
- **Derivation**: Entity-entity derivation
- **Generation**: Activity creates entity
- **Usage**: Activity uses entity
- **Start**: Activity initiation
- **End**: Activity termination
- **Invalidation**: Entity becomes invalid

### Collections and Structures
- **Collection**: Groups of entities
- **EmptyCollection**: Empty collections
- **Dictionary**: Key-value collections
- **EmptyDictionary**: Empty dictionaries
- **KeyEntityPair**: Dictionary entries
- **Bundle**: Provenance bundles

### Temporal and Contextual
- **InstantaneousEvent**: Point-in-time events
- **Location**: Spatial information
- **Plan**: Predefined strategies
- **Role**: Contextual roles

### Specialized Relationships
- **PrimarySource**: Original source relationships
- **Quotation**: Citation relationships
- **Revision**: Version relationships

## Key Properties

### Temporal Properties
- `prov:atTime`: Timestamp for events
- `prov:startedAtTime`: Activity start time
- `prov:endedAtTime`: Activity end time
- `prov:generatedAtTime`: Entity generation time
- `prov:invalidatedAtTime`: Entity invalidation time

### Qualified Relationships
PROV provides "qualified" versions of core relationships for additional detail:
- `prov:qualifiedGeneration`: Detailed generation information
- `prov:qualifiedUsage`: Detailed usage information
- `prov:qualifiedAssociation`: Detailed association information
- `prov:qualifiedAttribution`: Detailed attribution information
- `prov:qualifiedDerivation`: Detailed derivation information

### Contextual Properties
- `prov:hadRole`: Role in relationship
- `prov:hadPlan`: Plan followed
- `prov:atLocation`: Location of event
- `prov:hadMember`: Collection membership

## Practical SPARQL Examples

### 1. Find All Activities and Their Associated Agents
```sparql
PREFIX prov: <http://www.w3.org/ns/prov#>

SELECT ?activity ?agent WHERE {
    ?activity a prov:Activity .
    ?activity prov:wasAssociatedWith ?agent .
}
```

### 2. Find Entities Generated by Activities
```sparql
PREFIX prov: <http://www.w3.org/ns/prov#>

SELECT ?entity ?activity WHERE {
    ?entity a prov:Entity .
    ?entity prov:wasGeneratedBy ?activity .
}
```

### 3. Find Derivation Chains
```sparql
PREFIX prov: <http://www.w3.org/ns/prov#>

SELECT ?derived ?original WHERE {
    ?derived prov:wasDerivedFrom ?original .
}
```

### 4. Find Complete Provenance Trail
```sparql
PREFIX prov: <http://www.w3.org/ns/prov#>

SELECT ?entity ?activity ?agent ?time WHERE {
    ?entity prov:wasGeneratedBy ?activity .
    ?activity prov:wasAssociatedWith ?agent .
    OPTIONAL { ?activity prov:endedAtTime ?time }
}
```

### 5. Find Agents Acting on Behalf of Others
```sparql
PREFIX prov: <http://www.w3.org/ns/prov#>

SELECT ?delegate ?responsible WHERE {
    ?delegate prov:actedOnBehalfOf ?responsible .
}
```

### 6. Find Entities with Attribution
```sparql
PREFIX prov: <http://www.w3.org/ns/prov#>

SELECT ?entity ?agent ?role WHERE {
    ?entity prov:wasAttributedTo ?agent .
    OPTIONAL {
        ?entity prov:qualifiedAttribution ?attr .
        ?attr prov:agent ?agent .
        ?attr prov:hadRole ?role .
    }
}
```

## Common Use Cases

### 1. Scientific Research
- **Data Lineage**: Track how datasets are processed and transformed
- **Experiment Documentation**: Record experimental procedures and results
- **Reproducibility**: Enable replication of research workflows

### 2. Data Management
- **Data Transformation Tracking**: Monitor ETL processes
- **Quality Assurance**: Audit data processing steps
- **Compliance**: Meet regulatory requirements for data handling

### 3. Digital Preservation
- **Content History**: Document creation and modification history
- **Authenticity**: Establish provenance for digital objects
- **Migration Tracking**: Record format conversions and transfers

### 4. Workflow Systems
- **Process Documentation**: Capture computational workflows
- **Debugging**: Analyze workflow execution paths
- **Optimization**: Identify bottlenecks and inefficiencies

## Best Practices

### 1. Modeling Guidelines
- **Start Simple**: Begin with core Activity-Entity-Agent relationships
- **Use Qualified Relations**: Add detail with qualified properties when needed
- **Include Temporal Information**: Add timestamps for better tracking
- **Specify Roles**: Use `prov:hadRole` to clarify relationship contexts

### 2. Common Patterns
- **Generation Pattern**: `Entity prov:wasGeneratedBy Activity`
- **Usage Pattern**: `Activity prov:used Entity`
- **Attribution Pattern**: `Entity prov:wasAttributedTo Agent`
- **Association Pattern**: `Activity prov:wasAssociatedWith Agent`

### 3. Performance Considerations
- **Index Key Properties**: Focus on `prov:wasGeneratedBy`, `prov:used`, `prov:wasAttributedTo`
- **Use Bundles**: Group related provenance information
- **Limit Depth**: Avoid overly deep derivation chains in single queries

## Integration Tips

### 1. With Other Ontologies
- **FOAF**: Use for detailed agent information
- **Dublin Core**: Combine for metadata description
- **Time Ontology**: Enhance temporal modeling

### 2. Serialization Formats
- **RDF/XML**: Standard RDF serialization
- **Turtle**: Human-readable format
- **JSON-LD**: Web-friendly format
- **PROV-N**: PROV-specific notation

### 3. Validation
- **SHACL**: Define constraints for PROV data
- **SPARQL**: Query for consistency checks
- **PROV Constraints**: Follow W3C PROV constraints specification

This guide provides a comprehensive foundation for working with the PROV ontology, enabling effective provenance modeling and querying across diverse applications.